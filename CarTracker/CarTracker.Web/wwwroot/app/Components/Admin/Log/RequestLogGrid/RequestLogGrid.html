<div class="card">
    <div class="card-header">
        Request Logs
        <span class="float-right">
            <i class="fa fa-refresh action-icon" aria-hidden="true" v-on:click="refresh" v-tooltip title="Refresh"></i>
        </span>
    </div>
    <table class="table table-striped table-bordered">
        <thead>
            <tr>
                <th style="width: 1%;"></th> <!-- actions column -->
                <th><app-column-header columnId="RequestUrl"
                                       columnName="URL"
                                       :currentSort="currentSort"
                                       v-on:sort:update="sortUpdated"
                                       v-on:sort:clear="sortCleared"
                                       :enableFilter="true"
                                       filterType="TEXT"
                                       v-on:filter:update="filterUpdated"
                                       v-on:filter:clear="filterCleared">
                </app-column-header></th>
                <th><app-column-header columnId="RequestMethod"
                                       columnName="Method"
                                       :currentSort="currentSort"
                                       v-on:sort:update="sortUpdated"
                                       v-on:sort:clear="sortCleared"
                                       :enableFilter="true"
                                       :filterOptions="getMethodFilterOptions"
                                       v-on:filter:update="filterUpdated"
                                       v-on:filter:clear="filterCleared">
                </app-column-header></th>
                <th><app-column-header columnId="ResponseStatus"
                                       columnName="Status"
                                       :currentSort="currentSort"
                                       v-on:sort:update="sortUpdated"
                                       v-on:sort:clear="sortCleared"
                                       :enableFilter="true"
                                       :filterOptions="getStatusFilterOptions"
                                       v-on:filter:update="filterUpdated"
                                       v-on:filter:clear="filterCleared">
                </app-column-header></th>
                <th><app-column-header columnId="CreateDate"
                                       columnName="Date"
                                       :currentSort="currentSort"
                                       v-on:sort:update="sortUpdated"
                                       v-on:sort:clear="sortCleared"
                                       :enableFilter="true"
                                       filterType="DATE"
                                       v-on:filter:update="filterUpdated"
                                       v-on:filter:clear="filterCleared">
                </app-column-header></th>
                <th><app-column-header columnId="User"
                                       columnName="User"
                                       :enableSort="false">
                </app-column-header></th>
            </tr>
        </thead>
        <tbody>
            <tr v-for="log in logs">
                <td>
                    <i class="fa fa-th-list action-icon" aria-hidden="true" v-on:click="viewLog(log.requestLogId)" v-tooltip title="View Request Log"></i>
                </td>
                <td> {{ log.requestUrl }}</td>
                <td> {{ log.requestMethod }}</td>
                <td> {{ log.responseStatus  }}</td>
                <td> {{ log.createDate | formatDateTime }}</td>
                <td> {{ log.user.name }}</td>
            </tr>
        </tbody>
    </table>
    <app-pager :totalItems="totalItems" :currentPage="currentPage" :itemsPerPage="currentItemsPerPage" v-on:paging:update="pagingUpdated"></app-pager>
    
    <app-request-log-modal></app-request-log-modal>
</div>